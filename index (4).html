
<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='UTF-8'>
<title>SME Platform ‚Äì Full System</title>
<meta name='viewport' content='width=device-width, initial-scale=1.0'>
<style>
body { margin:0; font-family:'Comic Sans MS'; background:#111; color:#fff; overflow-x:hidden; }
body.light { background:#f3f3f3; color:#111; }

/* Animated Background */
body::before {
  content:""; position:fixed; inset:0; z-index:-1;
  background:linear-gradient(120deg,#000,#0d0d0d,#111);
  background-size:200% 200%; animation:bg 12s infinite;
}
@keyframes bg { 0%{background-position:0 50%;} 50%{background-position:100% 50%;} 100%{background-position:0 50%;} }

/* Sidebar */
#sidebar { position:fixed; top:0; left:0; width:70px; height:100%; background:#000; padding-top:20px; }
#sidebar div { padding:15px; cursor:pointer; text-align:center; }
#main { margin-left:80px; padding:20px; }

/* Cards */
.card { background:#222; padding:10px; border-radius:10px; width:160px; display:inline-block; margin:8px; }
.card img { width:100%; border-radius:8px; }

/* Favorites star */
.star { position:absolute; top:5px; left:5px; cursor:pointer; font-size:18px; color:#777; }
.star.fav { color:gold; }

/* Sections */
.section { display:none; }
.section.active { display:block; }

/* Friends system */
.friendCard { background:#222; padding:12px; width:250px; border-radius:10px; margin:6px; }
.reqCard { background:#333; padding:10px; border-radius:10px; margin:6px; }

#profileView { padding:20px; background:#000; border-radius:12px; margin-top:10px; display:none; }
#profileBanner {
  height:120px; background:linear-gradient(to bottom,#000,#0d0d0d); border-radius:12px;
}
#profileAvatar {
  width:90px; height:90px; border-radius:50%; border:3px solid #4caf50; position:relative; top:-40px; left:20px;
}

/* Embed viewer */
#embedWin { display:none; position:fixed; inset:0; background:#000d; }
#embedWin iframe { width:100%; height:100%; border:none; }
</style>
</head>
<body>

<div id='sidebar'>
  <div onclick="nav('games')">üéÆ</div>
  <div onclick="nav('downloads')">‚¨á</div>
  <div onclick="nav('favorites')">‚≠ê</div>
  <div onclick="nav('friends')">üë•</div>
  <div onclick="nav('profile')">üë§</div>
  <div onclick="toggleTheme()">üåó</div>
  <div onclick="panic()">‚ö†</div>
</div>

<div id='main'>

<h2 id='title'></h2>

<!-- Games -->
<div id='games' class='section active'>
  <h1>Games</h1>
  <div id='gameList'></div>
</div>

<!-- Downloads -->
<div id='downloads' class='section'>
  <h1>Downloads</h1>
  <p>Downloadable items appear here.</p>
</div>

<!-- Favorites -->
<div id='favorites' class='section'>
  <h1>Favorites</h1>
  <div id='favList'></div>
</div>

<!-- Friends Dashboard -->
<div id='friends' class='section'>
  <h1>Friends</h1>
  <h3>Friend Requests</h3>
  <div id='reqList'></div>

  <h3>Your Friends</h3>
  <div id='friendList'></div>

  <h3>Add Friend (Code)</h3>
  <input id='addCode' placeholder='Enter friend code'>
  <button onclick='addFriend()'>Add</button>

  <h3>Friend Profile</h3>
  <div id='profileView'>
    <div id='profileBanner'></div>
    <img id='profileAvatar'>
    <div id='profileDetails'></div>
  </div>
</div>

<!-- Profile -->
<div id='profile' class='section'>
  <h1>Your Profile</h1>
  <input id='username' placeholder='Username'><br><br>
  <textarea id='bio' placeholder='Bio...'></textarea><br><br>
  <button onclick='saveProfile()'>Save</button>
</div>

</div>

<!-- Embed Window -->
<div id='embedWin'><iframe id='embedFrame'></iframe></div>

<script>
/* Navigation */
function nav(id){
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

/* Theme */
function toggleTheme(){
  document.body.classList.toggle('light');
}

/* Panic */
function panic(){ location.href="https://classroom.google.com"; }

/* Game Data */
const uv="https://holyubofficial.net/service/";
function uvEnc(u){ return uv + btoa(u).replace(/=/g,""); }

let games=[
  {n:"Slime Rancher",i:"thumb1.png",u:"https://jeremy4401.github.io/slime-rancher/"},
  {n:"Minecraft Classic",i:"thumb2.png",u:"https://classic.minecraft.net/"}
];

let favorites=JSON.parse(localStorage.getItem('fav')||"[]");

/* Load Games */
function loadGames(){
  let g=document.getElementById('gameList'); g.innerHTML="";
  games.forEach(v=>{
    let fav=favorites.includes(v.n)?"fav":"";
    g.innerHTML+=`
      <div class='card'>
        <div class='star ${fav}' onclick="toggleFav('${v.n}'); event.stopPropagation()">‚òÖ</div>
        <img src='${v.i}' onclick="play('${uvEnc(v.u)}')">
        <button onclick="play('${uvEnc(v.u)}')">${v.n}</button>
      </div>`;
  });
}
loadGames();

/* Favorites */
function toggleFav(n){
  if(favorites.includes(n)) favorites=favorites.filter(x=>x!==n);
  else favorites.push(n);
  localStorage.setItem('fav',JSON.stringify(favorites));
  loadGames(); loadFavs();
}
function loadFavs(){
  let f=document.getElementById('favList'); f.innerHTML="";
  favorites.forEach(n=>{
    let v=games.find(x=>x.n===n);
    f.innerHTML+=`<div class='card'><img src='${v.i}'><button>${v.n}</button></div>`;
  });
}
loadFavs();

/* Play Game */
function play(u){
  document.getElementById('embedWin').style.display='block';
  document.getElementById('embedFrame').src=u;
}
document.addEventListener('keydown',e=>{
  if(e.key==="Escape"){
    document.getElementById('embedWin').style.display='none';
    document.getElementById('embedFrame').src="";
  }
});

/* PROFILE */
let profile=JSON.parse(localStorage.getItem('profile')||"{}");
function saveProfile(){
  profile.username=document.getElementById('username').value;
  profile.bio=document.getElementById('bio').value;
  localStorage.setItem('profile',JSON.stringify(profile));
  alert("Saved!");
}

/* FRIEND SYSTEM */
let friendCode="USER"+Math.floor(Math.random()*99999);
let friends=JSON.parse(localStorage.getItem('friends')||"[]");
let requests=JSON.parse(localStorage.getItem('requests')||"[]");

function addFriend(){
  let code=document.getElementById('addCode').value;
  if(code && !friends.includes(code)){
    requests.push({from:code});
    saveSocial();
    loadReqs();
  }
}

function accept(code){
  friends.push(code);
  requests=requests.filter(r=>r.from!==code);
  saveSocial(); loadReqs(); loadFriends();
}

function decline(code){
  requests=requests.filter(r=>r.from!==code);
  saveSocial(); loadReqs();
}

function loadReqs(){
  let r=document.getElementById('reqList'); r.innerHTML="";
  requests.forEach(v=>{
    r.innerHTML+=`
      <div class='reqCard'>
        Friend Request from ${v.from}<br>
        <button onclick="accept('${v.from}')">Accept</button>
        <button onclick="decline('${v.from}')">Decline</button>
      </div>`;
  });
}
function loadFriends(){
  let f=document.getElementById('friendList'); f.innerHTML="";
  friends.forEach(v=>{
    f.innerHTML+=`
      <div class='friendCard' onclick="openFriend('${v}')">
        ${v}<br>Status: Online
      </div>`;
  });
}
function openFriend(code){
  document.getElementById('profileView').style.display='block';
  document.getElementById('profileAvatar').src='https://i.imgur.com/1X5Rz.png';
  document.getElementById('profileDetails').innerHTML=`<h2>${code}</h2>Status: Online<br>Friend since: Today`;
}

/* Save */
function saveSocial(){
  localStorage.setItem('friends',JSON.stringify(friends));
  localStorage.setItem('requests',JSON.stringify(requests));
}

loadReqs();
loadFriends();
</script>

</body>
</html>
