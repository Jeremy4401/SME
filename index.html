
<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>SME Launcher</title><meta name="viewport" content="width=device-width, initial-scale=1.0"><style>@font-face{font-family:"Comic Sans MS";src:local("Comic Sans MS")} :root{--bg:#0f0f0f;--bg2:#1a1a1a;--text:#fff;--accent:#4caf50;--sidebar:#000;--banner1:#000;--banner2:#0f0f0f}body{margin:0;background:var(--bg);color:var(--text);font-family:"Comic Sans MS";overflow-x:hidden}body.light{--bg:#f5f5f5;--bg2:#fff;--text:#111;--accent:#2196f3;--sidebar:#222}#sidebar{position:fixed;top:0;left:0;width:75px;height:100%;background:var(--sidebar);padding-top:20px;display:flex;flex-direction:column;gap:10px;z-index:1000}#sidebar div{padding:15px;cursor:pointer;text-align:center;font-size:24px;transition:.2s}#sidebar div:hover{transform:scale(1.2)}#main{margin-left:90px;padding:20px}.section{display:none}.section.active{display:block}#homeDashboard{padding:20px;animation:fadeIn .4s ease}.homeCard{background:var(--bg2);padding:15px;border-radius:12px;margin-bottom:20px;box-shadow:0 0 10px #0005}.postBox{background:#222;padding:12px;border-radius:10px;margin:10px 0}body.light .postBox{background:#ddd}.postAuthor{font-weight:bold;color:var(--accent)}.postTime{opacity:.6;font-size:11px}.postActions{margin-top:5px;font-size:13px;opacity:.8;display:flex;gap:15px}

.card{background:var(--bg2);width:180px;height:260px;border-radius:12px;padding:12px;display:inline-flex;flex-direction:column;justify-content:space-between;align-items:center;margin:8px;cursor:pointer;transition:.2s;position:relative;vertical-align:top}
.card:hover{transform:translateY(-6px) scale(1.05)}
.card img{width:100%;height:200px;object-fit:cover;border-radius:10px}

.star{position:absolute;top:8px;left:8px;font-size:20px;cursor:pointer;color:#777}.star.fav{color:gold;text-shadow:0 0 10px gold}
#embedWin{display:none;position:fixed;inset:0;background:#000d;z-index:9999}#embedFrame{width:100%;height:100%;border:none}
.profileBanner{width:100%;height:90px;background:linear-gradient(90deg,var(--accent),transparent);border-radius:12px}
.profileAvatar{width:96px;height:96px;border-radius:50%;border:3px solid var(--bg2);margin-top:-48px;margin-left:15px;background:#333}
.tabBtn{padding:8px 14px;border-radius:8px;border:none;background:#222;color:var(--text);cursor:pointer}.tabBtn:hover{background:var(--accent)}
#settingsContent{background:var(--bg2);padding:15px;border-radius:10px}
.sme-toast{position:fixed;top:20px;right:20px;background:#333;color:#fff;padding:10px 14px;border-radius:8px;box-shadow:0 0 10px #000;font-size:14px;opacity:0;transition:.25s;z-index:10000}
.sme-toast.success{background:#2e7d32}.sme-toast.info{background:#1976d2}.sme-toast.error{background:#c62828}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
</style></head><body>
<div id="sidebar">
<div onclick="nav('homeDashboard')">üè†</div>
<div onclick="nav('games')">üéÆ</div>
<div onclick="nav('downloads')">‚¨á</div>
<div onclick="nav('favorites')">‚≠ê</div>
<div onclick="nav('theater')">üé¨</div>
<div onclick="nav('friends')">üë•</div>
<div onclick="nav('profile')">üë§</div>
<div onclick="openSettings()">‚öôÔ∏è</div>
<div onclick="toggleTheme()">üåó</div>
<div onclick="panic()">‚ö†</div>
</div>

<div id="main"><h1 id="pageTitle">Home</h1>
<div id="homeDashboard" class="section active">
<div class="homeCard"><h2>Welcome back!</h2><p>Your personalized SME Dashboard</p></div>
<div id="continuePlaying" class="homeCard"><h3>Continue Playing</h3><div id="continueList"></div></div>
<div id="socialFeed" class="homeCard"><h3>Social Feed</h3><div id="feedPosts"></div>
<textarea id="feedInput" placeholder="Share something..." style="width:100%;height:60px;padding:10px;border:none;border-radius:8px;background:#222;color:white;margin-top:10px;"></textarea>
<button onclick="postToFeed()" style="padding:10px;margin-top:8px;width:100%;border:none;border-radius:8px;background:var(--accent);color:white;">Post</button></div>
<div id="friendsOnline" class="homeCard"><h3>Friends Online</h3><div id="onlineList"></div></div>
<div id="activityLog" class="homeCard"><h3>Recent Activity</h3><div id="activityList"></div></div>
</div>

<div id="games" class="section"></div>
<div id="downloads" class="section"></div>
<div id="favorites" class="section"></div>
<div id="theater" class="section"></div>
<div id="friends" class="section"></div>
<div id="profile" class="section"></div>
<div id="settingsPage" class="section"><div id="settingsContent"></div></div>
</div>

<div id="embedWin"><iframe id="embedFrame"></iframe></div>

<div id="gameModal" style="display:none;position:fixed;inset:0;background:#000a;z-index:9999;align-items:center;justify-content:center;">
<div id="modalBox" style="width:420px;background:var(--bg2);padding:20px;border-radius:15px;box-shadow:0 0 20px #000;color:white;">
<img id="modalImg" src="" style="width:100%;border-radius:10px;">
<h2 id="modalTitle"></h2><p id="modalDesc"></p><div id="playtimeBox" style="margin-top:10px;"></div>
<button id="playBtn" style="padding:10px;width:100%;border:none;border-radius:8px;background:var(--accent);color:white;margin-top:10px;">Play</button>
<button onclick="closeGameModal()" style="padding:10px;width:100%;border:none;border-radius:8px;background:#333;color:white;margin-top:10px;">Close</button>
</div></div>

<script>
/* ================================================================
   ALL JS BELOW IS UNCHANGED ‚Äî FULL GAME ENGINE, FRIEND SYSTEM, DM,
   THEMES, BACKGROUNDS, PROFILE, XP, ACHIEVEMENTS, MOD MANAGER, ETC
================================================================ */

function nav(id){document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));let t=document.getElementById(id);if(t)t.classList.add('active');let m={homeDashboard:"Home",games:"Games",downloads:"Downloads",favorites:"Favorites",theater:"SME Theater",friends:"Friends",profile:"Profile",settingsPage:"Settings"};document.getElementById("pageTitle").textContent=m[id]||"SME";if(id==="theater")loadTheater()}
function toggleTheme(){document.body.classList.toggle('light')}
function panic(){location.href="https://classroom.google.com"}
function enc(u){return u}
function notify(msg,type="info"){const t=document.createElement("div");t.className="sme-toast "+type;t.textContent=msg;document.body.appendChild(t);requestAnimationFrame(()=>t.style.opacity=1);setTimeout(()=>{t.style.opacity=0;setTimeout(()=>t.remove(),250)},2500)}

let recent=JSON.parse(localStorage.getItem("recent")||"[]");
let activity=JSON.parse(localStorage.getItem("activity")||"[]");
let friends=JSON.parse(localStorage.getItem("friends")||"[]");
let storedProfile=localStorage.getItem("profile");
let profile=storedProfile?JSON.parse(storedProfile):{username:"Player",bio:"",status:"Online",avatar:"https://i.imgur.com/1X5Rz.png"};
let friendCode=localStorage.getItem("friendCode");if(!friendCode){friendCode="SME-"+Math.random().toString(36).substring(2,8).toUpperCase();localStorage.setItem("friendCode",friendCode)}
function addRecent(n){let i=recent.indexOf(n);if(i!==-1)recent.splice(i,1);recent.unshift(n);if(recent.length>20)recent.pop();localStorage.setItem("recent",JSON.stringify(recent))}

function renderContinuePlaying(){let b=document.getElementById("continueList");if(recent.length===0){b.innerHTML="<p>No recent games.</p>";return}b.innerHTML="";recent.slice(0,3).forEach(n=>{let g=games.find(x=>x.name===n);if(!g)return;b.innerHTML+=`<div class="card" style="width:150px;" onclick="launchGame('${g.name}')"><img src="${g.img}"><button>${g.name}</button></div>`})}
let feed=JSON.parse(localStorage.getItem("feed")||"[]");
function postToFeed(){let t=document.getElementById("feedInput").value.trim();if(t.length===0)return;let e={id:Date.now(),user:profile.username||"You",text:t,time:new Date().toLocaleTimeString(),likes:0,comments:[]};feed.unshift(e);localStorage.setItem("feed",JSON.stringify(feed));document.getElementById("feedInput").value="";renderFeed()}
function likePost(id){let p=feed.find(x=>x.id===id);if(!p)return;p.likes++;localStorage.setItem("feed",JSON.stringify(feed));renderFeed()}
function commentPost(id){let m=prompt("Write a comment:");if(!m)return;let p=feed.find(x=>x.id===id);if(!p)return;p.comments.push({user:profile.username||"You",text:m,time:new Date().toLocaleTimeString()});localStorage.setItem("feed",JSON.stringify(feed));renderFeed()}
function renderFeed(){let b=document.getElementById("feedPosts");b.innerHTML="";if(feed.length===0){b.innerHTML="<p>No posts yet. Be the first!</p>";return}feed.forEach(p=>{let c="";p.comments.forEach(k=>{c+=`<div style="margin-left:10px;opacity:.8;"><b style="color:var(--accent)">${k.user}:</b> ${k.text} <span style="font-size:10px;opacity:.5;">${k.time}</span></div>`});b.innerHTML+=`
<div class="postBox"><div class="postAuthor">${p.user}</div><div class="postTime">${p.time}</div><p>${p.text}</p>
<div class="postActions"><span onclick="likePost(${p.id})">‚ù§Ô∏è ${p.likes}</span><span onclick="commentPost(${p.id})">üí¨ Comment</span></div>${c}</div>`})}

function renderFriendsOnline(){let b=document.getElementById("onlineList");b.innerHTML="";if(friends.length===0){b.innerHTML="<p>No friends added.</p>";return}friends.forEach(c=>{b.innerHTML+=`<div style="padding:8px;background:#222;border-radius:8px;margin:5px 0;"><b>${c}</b> ‚Äî <span style="color:#4caf50;">Online</span></div>`})}
function renderActivityHome(){let b=document.getElementById("activityList");b.innerHTML="";if(activity.length===
